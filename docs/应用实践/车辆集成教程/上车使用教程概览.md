## 概览

自动驾驶系统集车辆学、人工智能、计算机科学、自动控制等多学科应用于一体，是一个非常复杂的系统。而要搭建一个闭环的自动驾驶系统，不仅技术门槛高，还面临着资金成本高、政策约束等多方面的挑战。Apollo 开源平台的出现，极大的降低了学习自动驾驶的技术门槛。

【上车使用教程】系列文档以【林肯 MKZ】为对象，介绍如何使用 Apollo 自动驾驶平台进行上车实践。

## 使用场景

本文档覆盖以下 Apollo 使用场景：

- 循迹自动驾驶搭建
  
  循迹自动驾驶指让车辆按照录制好的轨迹线进行自动驾驶，其涉及到自动驾驶中最基本的底盘线控能力、定位能力、控制能力，是自动驾驶系统的一个最小子集。同时，循迹自动驾驶也是进行封闭园区自动驾驶的前提。

- 基于激光雷达的封闭园区自动驾驶搭建
  
  在进行封闭园区自动驾驶之前，请您先按照文档完成循迹自动驾驶，以确保正确安装配置相关软硬件。 

- 基于摄像头的封闭园区自动驾驶搭建
  
  在进行封闭园区自动驾驶之前，请您先按照文档完成循迹自动驾驶，以确保正确安装配置相关软硬件。

## 前提条件

- 已有车辆和传感器
  
  请参照【上车使用教程】系列文档完成 DBC（Database Can）适配、Apollo 软件安装、传感器集成、配置、标定，从而搭建基于 Apollo 的闭环自动驾驶车辆。

- 无车辆和传感器
  
  如没有车辆和传感器，您可以采购车辆和传感器，并参照文档进行软硬件安装、适配、传感器集成、配置、标定和测试。由于搭建闭环自动驾驶系统的车辆存在硬件成本高、采购周期长、测试场地受限制等各种问题，您也可以选择 [Apollo 自动驾驶开发套件](https://developer.apollo.auto/apollo_d_kit.html) 和 **Fuel 自动驾驶研发云** 减少每个步骤的研发成本。

## 循迹搭建

- Apollo 系统安装
  
  在集成车辆之前，首先要完成 Apollo 系统的软硬件安装；之后完成计算单元 Hardware 3.0（HW 3.0）的软件安装，包括 Ubuntu Linux、Apollo 软件系统安装等。

- 车辆集成
  
  在车辆集成环节，将完成计算单元 HW 3.0、路由器、惯导设备、显示器等设备在车辆上的集成。

- 定位模块配置
  
  组合惯导设备和定位模块的配置与验证。

- 车辆动力学标定
  
  本环节介绍生成车辆动力学标定表方法，形成控制闭环以获得更好的控制效果。油门刹车标定是车辆纵向精准控制的前提。您可以使用系统预先标定好的参数，也可以按照文档说明重新进行标定以获得更好的控制效果。

- 车辆循迹演示
  
  在完成以上软硬件安装，标定以及系统文件配置后，您可以通过 Dreamview 界面录制车辆轨迹并回放，完成第一个循迹演示。

## 基于激光雷达的封闭园区自动驾驶搭建

- 感知设备集成
  
  在完成循迹搭建之后，基于激光雷达的封闭园区自动驾驶搭建第一步需要完成激光雷达感知设备的集成、配置与验证。

- 感知设备标定
  
  本环节介绍激光雷达到组合惯导的标定方法。

- 虚拟车道线制作
  
  本环节介绍虚拟车道线制作方法，为后续的自动驾驶演示做准备。

- 感知适配
  
  本环节介绍基于激光雷达的封闭园区自动驾驶感知配置与验证。

- 规划适配
  
  本环节介绍基于激光雷达的封闭园区自动驾驶规划配置与验证。

- 自动驾驶演示
  
  在完成以上步骤后，您可以通过 Dreamview 界面启动一个基于激光雷达的封闭园区自动驾驶演示。

## 基于摄像头的封闭园区自动驾驶搭建

- 感知设备集成
  
  在完成循迹搭建之后，基于摄像头的封闭园区自动驾驶搭建第一步需要完成摄像头的集成、配置与验证。

- 感知设备标定
  
  本环节介绍摄像头到激光雷达的标定方法。

- 虚拟车道线制作
  
  本环节介绍虚拟车道线制作方法，为后续的自动驾驶演示做准备。

- 感知适配
  
  本环节介绍基于摄像头的封闭园区自动驾驶感知配置与验证。

- 规划适配
  
  本环节介绍基于激光雷达的封闭园区自动驾驶规划配置与验证。

- 自动驾驶演示
  
  在完成以上步骤后，您可以通过 Dreamview 界面启动一个基于封闭园区的自动驾驶演示。